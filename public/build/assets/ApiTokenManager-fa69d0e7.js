import{d as I,e as U,v as L,o as i,f as r,u as z,b as t,w as e,r as b,a as l,g as E,n as $,h as k,T as x,i as C,j as a,k as d,F as w,l as A,t as h}from"./app-e054b93f.js";import{_ as Y}from"./ActionMessage-1ecdf636.js";import{S as q,_ as G,a as S}from"./DialogModal-521d3a6f.js";import{_ as H}from"./ConfirmationModal-6b449687.js";import{D as J}from"./DangerButton-de8a7c92.js";import{_ as K,a as O}from"./TextInput-338b2532.js";import{_ as T}from"./InputLabel-caa22c5d.js";import{_ as D}from"./PrimaryButton-99cc3245.js";import{_ as P}from"./SecondaryButton-d0d30255.js";import{S as Q}from"./SectionBorder-dcdca758.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-554662fa.js";const R=["value"],F={__name:"Checkbox",props:{checked:{type:[Array,Boolean],default:!1},value:{default:null}},emits:["update:checked"],setup(c,{emit:g}){const o=c,u=I({get(){return o.checked},set(p){g("update:checked",p)}});return(p,v)=>U((i(),r("input",{type:"checkbox",value:c.value,"onUpdate:modelValue":v[0]||(v[0]=m=>u.value=m),class:"text-purple-600 form-checkbox focus:shadow-outline-purple focus:border-purple-400 focus:outline-none dark:focus:shadow-outline-gray"},null,8,R)),[[L,u.value]])}},W={class:"md:grid md:grid-cols-3 md:gap-6"},X={class:"mt-5 md:mt-0 md:col-span-2"},Z={class:"grid grid-cols-6 gap-6"},ee={key:0,class:"flex items-center justify-end px-4 py-3 bg-gray-50 text-right sm:px-6 shadow sm:rounded-bl-md sm:rounded-br-md"},se={__name:"FormSection",emits:["submitted"],setup(c){const g=I(()=>!!z().actions);return(o,u)=>(i(),r("div",W,[t(q,null,{title:e(()=>[b(o.$slots,"title")]),description:e(()=>[b(o.$slots,"description")]),_:3}),l("div",X,[l("form",{onSubmit:u[0]||(u[0]=E(p=>o.$emit("submitted"),["prevent"]))},[l("div",{class:$(["px-4 py-5 bg-white sm:p-6 shadow",g.value?"sm:rounded-tl-md sm:rounded-tr-md":"sm:rounded-md"])},[l("div",Z,[b(o.$slots,"form")])],2),g.value?(i(),r("div",ee,[b(o.$slots,"actions")])):k("",!0)],32)])]))}},te={class:"col-span-6 sm:col-span-4"},oe={key:0,class:"col-span-6"},ne={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"flex items-center"},ae={class:"ml-2 text-sm text-gray-600"},ie={key:0},re={class:"mt-10 sm:mt-0"},de={class:"space-y-6"},ue={class:"break-all"},ce={class:"flex items-center ml-2"},me={key:0,class:"text-sm text-gray-400"},pe=["onClick"],ve=["onClick"],fe=l("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1),_e={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500 break-all"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ge={class:"flex items-center"},ye={class:"ml-2 text-sm text-gray-600"},Ie={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(c){const o=x({name:"",permissions:c.defaultPermissions}),u=x({permissions:[]}),p=x({}),v=C(!1),m=C(null),_=C(null),V=()=>{o.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{v.value=!0,o.reset()}})},B=f=>{u.permissions=f.abilities,m.value=f},j=()=>{u.put(route("api-tokens.update",m.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>m.value=null})},N=f=>{_.value=f},M=()=>{p.delete(route("api-tokens.destroy",_.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>_.value=null})};return(f,n)=>(i(),r("div",null,[t(se,{onSubmitted:V},{title:e(()=>[a(" Create API Token ")]),description:e(()=>[a(" API tokens allow third-party services to authenticate with our application on your behalf. ")]),form:e(()=>[l("div",te,[t(T,{for:"name",value:"Name"}),t(K,{id:"name",modelValue:d(o).name,"onUpdate:modelValue":n[0]||(n[0]=s=>d(o).name=s),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),t(O,{message:d(o).errors.name,class:"mt-2"},null,8,["message"])]),c.availablePermissions.length>0?(i(),r("div",oe,[t(T,{for:"permissions",value:"Permissions"}),l("div",ne,[(i(!0),r(w,null,A(c.availablePermissions,s=>(i(),r("div",{key:s},[l("label",le,[t(F,{checked:d(o).permissions,"onUpdate:checked":n[1]||(n[1]=y=>d(o).permissions=y),value:s},null,8,["checked","value"]),l("span",ae,h(s),1)])]))),128))])])):k("",!0)]),actions:e(()=>[t(Y,{on:d(o).recentlySuccessful,class:"mr-3"},{default:e(()=>[a(" Created. ")]),_:1},8,["on"]),t(D,{class:$({"opacity-25":d(o).processing}),disabled:d(o).processing},{default:e(()=>[a(" Create ")]),_:1},8,["class","disabled"])]),_:1}),c.tokens.length>0?(i(),r("div",ie,[t(Q),l("div",re,[t(G,null,{title:e(()=>[a(" Manage API Tokens ")]),description:e(()=>[a(" You may delete any of your existing tokens if they are no longer needed. ")]),content:e(()=>[l("div",de,[(i(!0),r(w,null,A(c.tokens,s=>(i(),r("div",{key:s.id,class:"flex items-center justify-between"},[l("div",ue,h(s.name),1),l("div",ce,[s.last_used_ago?(i(),r("div",me," Last used "+h(s.last_used_ago),1)):k("",!0),c.availablePermissions.length>0?(i(),r("button",{key:1,class:"cursor-pointer ml-6 text-sm text-gray-400 underline",onClick:y=>B(s)}," Permissions ",8,pe)):k("",!0),l("button",{class:"cursor-pointer ml-6 text-sm text-red-500",onClick:y=>N(s)}," Delete ",8,ve)])]))),128))])]),_:1})])])):k("",!0),t(S,{show:v.value,onClose:n[3]||(n[3]=s=>v.value=!1)},{title:e(()=>[a(" API Token ")]),content:e(()=>[fe,f.$page.props.jetstream.flash.token?(i(),r("div",_e,h(f.$page.props.jetstream.flash.token),1)):k("",!0)]),footer:e(()=>[t(P,{onClick:n[2]||(n[2]=s=>v.value=!1)},{default:e(()=>[a(" Close ")]),_:1})]),_:1},8,["show"]),t(S,{show:m.value!=null,onClose:n[6]||(n[6]=s=>m.value=null)},{title:e(()=>[a(" API Token Permissions ")]),content:e(()=>[l("div",ke,[(i(!0),r(w,null,A(c.availablePermissions,s=>(i(),r("div",{key:s},[l("label",ge,[t(F,{checked:d(u).permissions,"onUpdate:checked":n[4]||(n[4]=y=>d(u).permissions=y),value:s},null,8,["checked","value"]),l("span",ye,h(s),1)])]))),128))])]),footer:e(()=>[t(P,{onClick:n[5]||(n[5]=s=>m.value=null)},{default:e(()=>[a(" Cancel ")]),_:1}),t(D,{class:$(["ml-3",{"opacity-25":d(u).processing}]),disabled:d(u).processing,onClick:j},{default:e(()=>[a(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),t(H,{show:_.value!=null,onClose:n[8]||(n[8]=s=>_.value=null)},{title:e(()=>[a(" Delete API Token ")]),content:e(()=>[a(" Are you sure you would like to delete this API token? ")]),footer:e(()=>[t(P,{onClick:n[7]||(n[7]=s=>_.value=null)},{default:e(()=>[a(" Cancel ")]),_:1}),t(J,{class:$(["ml-3",{"opacity-25":d(p).processing}]),disabled:d(p).processing,onClick:M},{default:e(()=>[a(" Delete ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Ie as default};
